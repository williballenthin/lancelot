# https://numtide.github.io/devshell

[[commands]]
name = "profile"
command = "echo 'rust'"
help = "show profile (rust)"

#[[env]]
# name = "CARGO_PROFILE_DEV_CODEGEN_BACKEND"
# value = "cranelift"

[[env]]
name = "LIBRARY_PATH"
eval = "$DEVSHELL_DIR/lib:/usr/lib"

[[env]]
name = "RUSTFLAGS"
eval = "\"-L $DEVSHELL_DIR/lib\""

[[commands]]
name = "pc"
command = "pre-commit run --all-files --hook-stage manual"
help = "pre-commit (manual)"

[devshell]
packages = [
  "libiconv",
  "zydis",
  "bacon",
  # "protobuf",
  "just",
  "gcc",
  "python312",
  "uv",
  # rust/cargo installed by rustup
  # rust-analyzer installed by rustup
  "bacon",
  "mold",
  "pre-commit",
  "stdenv.cc.cc.lib",
  "cmake",
  "gnumake",
  "pkg-config",
  "hyperfine",
  "tailspin",
  # LSP for helix
  "basedpyright",
  "ruff-lsp",
  "python312Packages.python-lsp-server",
  "python312Packages.pylsp-mypy",
  "python312Packages.black",
]
